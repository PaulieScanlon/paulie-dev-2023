---
const { data } = Astro.props;

const listData = data
  .filter((item) => {
    if (item.slug.includes('/posts/2')) {
      return item;
    }
  })
  .sort((a, b) => b.total - a.total)
  .slice(0, 10);
---

<ul class='m-0 border rounded border-brand-outline bg-brand-surface px-4 sm:py-2'>
  {
    listData.map((item, index) => {
      const { slug, total } = item;
      const parts = slug.split('/');
      const title = parts[parts.length - 2].split('-').join(' ');
      return (
        <li class='flex items-center gap-4 border-b border-b-transparent [&:not(:last-child)]:border-b-brand-outline p-0'>
          <small class='flex shrink-0 items-center justify-center w-6 h-6 rounded-full font-bold leading-4 text-brand-salmon border-2 border-brand-salmon'>
            {index + 1}
          </small>

          <div class='truncate text-brand-secondary'>
            <a href={slug} class='capitalize'>
              {title}
            </a>
          </div>

          <strong class='flex justify-end grow'>{`x${total}`}</strong>
        </li>
      );
    })
  }
</ul>
